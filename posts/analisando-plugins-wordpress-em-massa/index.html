<!doctype html><html lang=en><head><title>Analisando plguins wordpress em massa :: Jojo's Exceptions</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Acredito que a grande maioria do pessoal que procura vulnerabilidades rentáveis dentro do mundo de aplicações web, em algum momento já passou pela stack que o WordPress fornece, seja auditando seu core, ou plugins, sendo este último o foco dessa postagem.
Junto a um simples crawler escrito em C# 9.0, vamos percorrer todos os plugins listáveis na index do site do projeto, e organiza-lo em uma estrutura de descrição, reputação, número de downloads, e o próprio ."><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=https://exception.blog/posts/analisando-plugins-wordpress-em-massa/><link rel=stylesheet href=https://exception.blog/assets/style.css><link rel=stylesheet href=https://exception.blog/assets/red.css><link rel=apple-touch-icon href=https://exception.blog/img/apple-touch-icon-192x192.png><link rel="shortcut icon" href=https://exception.blog/favicon.png><meta name=twitter:card content="summary"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="og:title" content="Analisando plguins wordpress em massa"><meta property="og:description" content="Acredito que a grande maioria do pessoal que procura vulnerabilidades rentáveis dentro do mundo de aplicações web, em algum momento já passou pela stack que o WordPress fornece, seja auditando seu core, ou plugins, sendo este último o foco dessa postagem.
Junto a um simples crawler escrito em C# 9.0, vamos percorrer todos os plugins listáveis na index do site do projeto, e organiza-lo em uma estrutura de descrição, reputação, número de downloads, e o próprio ."><meta property="og:url" content="https://exception.blog/posts/analisando-plugins-wordpress-em-massa/"><meta property="og:site_name" content="Jojo's Exceptions"><meta property="og:image" content="https://exception.blog/favicon.png"><meta property="og:image:width" content="2048"><meta property="og:image:height" content="1024"><meta property="article:published_time" content="2021-07-06 23:38:32 -0300 -0300"></head><body class=red><div class="container center headings--one-size"><header class=header><div class=header__inner><div class=header__logo><a href=/><div class=logo>exception</div></a></div><div class=menu-trigger>menu</div></div><nav class=menu><ul class="menu__inner menu__inner--desktop"><li><a href=/about>whois</a></li></ul><ul class="menu__inner menu__inner--mobile"><li><a href=/about>whois</a></li></ul></nav></header><div class=content><div class=post><h1 class=post-title><a href=https://exception.blog/posts/analisando-plugins-wordpress-em-massa/>Analisando plguins wordpress em massa</a></h1><div class=post-meta><span class=post-date>2021-07-06</span>
<span class=post-author>:: jojo</span></div><span class=post-tags>#<a href=https://exception.blog/tags/scraping/>scraping</a>&nbsp;
#<a href=https://exception.blog/tags/research/>research</a>&nbsp;</span><div class=post-content><div><p>Acredito que a grande maioria do pessoal que procura vulnerabilidades rentáveis dentro do mundo de aplicações web, em algum momento já passou pela <em>stack</em> que o WordPress fornece, seja auditando seu <code>core</code>, ou plugins, sendo este último o foco dessa postagem.</p><p>Junto a um simples <em>crawler</em> escrito em C# 9.0, vamos percorrer todos os <em>plugins</em> listáveis na <em>index</em> do site do projeto, e organiza-lo em uma estrutura de descrição, reputação, número de downloads, e o próprio <code>.zip</code> contendo o código do plugin, isso tudo organizado em diretórios separados por nomes, e um arquivo <code>.json</code> de metadados do pacote.</p><blockquote><p><strong>Nota</strong>: Caso tenha interesse em apenas utilizar o <em>crawler</em>, verifique-o no repositório indicado no item <em>Conclusão</em>.</p></blockquote><h1 id=top-level-program>Top-level program<a href=#top-level-program class=hanchor arialabel=Anchor>&#8983;</a></h1><p>Por não haver a necessidade de termos uma estrutura de programa complexa, vamos utilizar os recursos que o C# 9.0 tem de melhor, em trazer minimalismo na hora de construir uma aplicação de linha de comando: Com <em>top-level programs</em>. Dentro dessa linguagem, essa caracteristica permite que escvrevamos código, sem o <em>template</em> clássico do <code>static void Main()</code>.</p><p><img src=/static/26f475e9f2a847fe0bbf2eab.png alt="Apresentação do site"></p><p>Para análisar o HTML da página, e não passar raiva ou perder tempo com expressões regulares ou ficar refém de algo como <code>LastIndexOf()</code> ou <code>IndexOf()</code>, irei utilizar o <code>AngleParse</code> como biblioteca para realizar o <em>parsing</em> da sopa de letras que vamos extrair do site exibido acima. Um ponto de atenção na hora de fazer o <em>crawling</em>, é justamente se antentar onde será realizado, tendo em vista que a listagem completa dos quase 60 mil plugins não é possível.</p><blockquote><p><strong>Nota</strong>: Também vamos fazer tudo isso assíncrono e paralelo, utilizando <code>async</code> e <code>SemaphoreSlim</code>.</p></blockquote><p>Ah, e seguindo a linha das outras postagens, o código vou escrevendo conforme vou conseguindo tempo no meu dia-a-dia, por tanto essa postagem também se remete a essa condição, e pode ser atualizada constantemente conforme meu humor varie. Caso tenha visto alguma coisa que alterou, todo o blog está disponível em meu GitHub no <code>/exception</code>.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=color:#66d9ef>using</span> System;
<span style=color:#66d9ef>using</span> System.Net.Http;
<span style=color:#66d9ef>using</span> System.Threading;
<span style=color:#66d9ef>using</span> static System.Console;

<span style=color:#66d9ef>var</span> clientHandler = <span style=color:#66d9ef>new</span> HttpClientHandler
{
    AllowAutoRedirect = <span style=color:#66d9ef>false</span>,
    UseCookies = <span style=color:#66d9ef>false</span>
};
<span style=color:#66d9ef>var</span> client = <span style=color:#66d9ef>new</span> HttpClient(clientHandler);
<span style=color:#66d9ef>var</span> semaphore = <span style=color:#66d9ef>new</span> SemaphoreSlim(Environment.ProcessorCount);
<span style=color:#66d9ef>var</span> downloadList = <span style=color:#66d9ef>new</span>[]
{
    <span style=color:#e6db74>&#34;https://wordpress.org/plugins/browse/popular/&#34;</span>,
    <span style=color:#e6db74>&#34;https://wordpress.org/plugins/browse/beta/&#34;</span>,
    <span style=color:#e6db74>&#34;https://wordpress.org/plugins/browse/featured/&#34;</span>,
    <span style=color:#e6db74>&#34;https://wordpress.org/plugins/browse/blocks/&#34;</span>
};

WriteLine(<span style=color:#e6db74>&#34;[+] Crawler started with a possible total of {0} thread(s)&#34;</span>, Environment.ProcessorCount);

</code></pre></div></div></div></div></div><footer class=footer><div class=footer__inner><div class=copyright><span>© 2021 Powered by <a href=http://gohugo.io>Hugo</a></span>
<span>:: Theme made by <a href=https://twitter.com/panr>panr</a></span></div></div></footer><script src=https://exception.blog/assets/main.js></script><script src=https://exception.blog/assets/prism.js></script></div></body></html>